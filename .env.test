# =====================================================
# Database Testing Environment Configuration
# =====================================================
# Copy this file to .env.test and customize for your testing environment

# === POSTGRESQL CONNECTION ===
# Direct PostgreSQL connection settings
TEST_DB_HOST=localhost
TEST_DB_PORT=5432
TEST_DB_DATABASE=subscription_platform
TEST_DB_USER=subscription_user
TEST_DB_PASSWORD=subscription_pass_2024

# === PGBOUNCER CONNECTION ===
# PgBouncer connection settings (if available)
TEST_PGBOUNCER_HOST=localhost
TEST_PGBOUNCER_PORT=6432

# === CONNECTION POOL SETTINGS ===
# Pool configuration for testing
TEST_DB_POOL_MAX=10
TEST_DB_IDLE_TIMEOUT=30000
TEST_DB_CONNECTION_TIMEOUT=5000

# PgBouncer pool settings
TEST_PGBOUNCER_POOL_MAX=20
TEST_PGBOUNCER_IDLE_TIMEOUT=10000
TEST_PGBOUNCER_CONNECTION_TIMEOUT=5000

# === SSL CONFIGURATION ===
# Set to true for SSL connections
TEST_DB_SSL=false

# === TEST EXECUTION SETTINGS ===
# Test behavior configuration
TEST_TIMEOUT=30000
TEST_RETRIES=1
TEST_PARALLEL=false
TEST_VERBOSE=false
TEST_PERFORMANCE=true
TEST_CLEANUP=true

# === STRESS TESTING CONFIGURATION ===
# Stress test parameters
TEST_STRESS_CONNECTIONS=50
TEST_STRESS_DURATION=10000
TEST_STRESS_QUERIES=10

# === PERFORMANCE TARGETS ===
# Performance testing thresholds (milliseconds)
TEST_TARGET_CONNECTION_MS=100
TEST_TARGET_QUERY_MS=50
TEST_TARGET_INSERT_RPS=1000

# === TEST DATA CONFIGURATION ===
# Test data generation settings
TEST_USERS_COUNT=100
TEST_SUBSCRIPTIONS_PER_USER=2
TEST_CREDITS_PER_USER=5
TEST_TASKS_PER_SUBSCRIPTION=1

# === ENVIRONMENT SETTINGS ===
# Environment identification
NODE_ENV=test
CI=false
DEBUG=false
LOG_LEVEL=info

# =====================================================
# Environment-specific Examples
# =====================================================

# === DEVELOPMENT TESTING ===
# Typical settings for local development testing
# TEST_DB_HOST=localhost
# TEST_DB_PORT=5432
# TEST_VERBOSE=true
# TEST_PERFORMANCE=true
# TEST_USERS_COUNT=50

# === CI/CD TESTING ===
# Typical settings for continuous integration
# TEST_DB_HOST=postgres-test
# TEST_DB_PORT=5432
# TEST_TIMEOUT=60000
# TEST_RETRIES=3
# TEST_PARALLEL=false
# CI=true

# === PRODUCTION-LIKE TESTING ===
# Settings for production-like testing environment
# TEST_DB_HOST=test-db.internal
# TEST_DB_PORT=5432
# TEST_DB_SSL=true
# TEST_PERFORMANCE=true
# TEST_STRESS_CONNECTIONS=100
# TEST_USERS_COUNT=1000

# =====================================================
# Docker Configuration
# =====================================================
# If running tests against Docker PostgreSQL

# === DOCKER COMPOSE SETUP ===
# TEST_DB_HOST=localhost
# TEST_DB_PORT=5433  # Mapped port from docker-compose
# TEST_DB_DATABASE=subscription_platform_test
# TEST_DB_USER=test_user
# TEST_DB_PASSWORD=test_password

# === DOCKER NETWORK SETUP ===
# TEST_DB_HOST=postgres-test-container
# TEST_DB_PORT=5432
# TEST_DB_DATABASE=subscription_platform_test

# =====================================================
# Cloud Database Testing
# =====================================================

# === AWS RDS TESTING ===
# TEST_DB_HOST=test-db.cluster-xxxxx.us-east-1.rds.amazonaws.com
# TEST_DB_PORT=5432
# TEST_DB_SSL=true
# TEST_DB_DATABASE=subscription_platform_test

# === Google Cloud SQL TESTING ===
# TEST_DB_HOST=xx.xx.xx.xx
# TEST_DB_PORT=5432
# TEST_DB_SSL=true
# TEST_DB_DATABASE=subscription_platform_test

# === Azure PostgreSQL TESTING ===
# TEST_DB_HOST=test-server.postgres.database.azure.com
# TEST_DB_PORT=5432
# TEST_DB_SSL=true
# TEST_DB_DATABASE=subscription_platform_test

# =====================================================
# Advanced Testing Configuration
# =====================================================

# === LOAD TESTING ===
# For high-load testing scenarios
# TEST_STRESS_CONNECTIONS=200
# TEST_STRESS_DURATION=60000
# TEST_STRESS_QUERIES=50
# TEST_USERS_COUNT=10000

# === MINIMAL TESTING ===
# For quick smoke tests
# TEST_USERS_COUNT=10
# TEST_SUBSCRIPTIONS_PER_USER=1
# TEST_CREDITS_PER_USER=2
# TEST_TASKS_PER_SUBSCRIPTION=1
# TEST_PERFORMANCE=false

# === INTEGRATION TESTING ===
# For integration with other services
# TEST_VERBOSE=true
# TEST_CLEANUP=false  # Keep data for inspection
# TEST_TIMEOUT=120000  # Longer timeout for complex operations

# =====================================================
# Security Testing Configuration
# =====================================================

# === SECURITY TESTING ===
# Settings for security-focused testing
# TEST_SQL_INJECTION=true
# TEST_CONNECTION_LIMITS=true
# TEST_PRIVILEGE_ESCALATION=true

# =====================================================
# Monitoring and Observability
# =====================================================

# === MONITORING SETTINGS ===
# TEST_METRICS_ENABLED=true
# TEST_TRACE_ENABLED=true
# TEST_LOG_QUERIES=true

# =====================================================
# Usage Notes
# =====================================================
# 1. Copy this file to .env.test in your project root
# 2. Customize the values for your testing environment
# 3. Never commit real credentials to version control
# 4. Use different configurations for different environments
# 5. Set appropriate timeouts for your network conditions
#
# To run tests with custom settings:
# TEST_VERBOSE=true npm test
# TEST_PERFORMANCE=false npm run test:quick
# TEST_PGBOUNCER_PORT=6432 npm run test:pgbouncer
#
# To check your configuration:
# npm run test:env
# npm run test:connection